(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self,t.Chartkick=e())})(this,function(){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t instanceof Function}function r(t){return"[object Object]"===Object.prototype.toString.call(t)&&!e(t)&&t instanceof Object}function n(e,o){for(var a in o)"__proto__"!==a&&(r(o[a])||t(o[a])?(r(o[a])&&!r(e[a])&&(e[a]={}),t(o[a])&&!t(e[a])&&(e[a]=[]),n(e[a],o[a])):void 0!==o[a]&&(e[a]=o[a]))}function o(t,e){var r={};return n(r,t),n(r,e),r}function a(t){for(var e=0;e<t.length;e++)for(var r=t[e].data,n=0;n<r.length;n++)if(r[n][1]<0)return!0;return!1}function i(t){return""+t}function s(t){return parseFloat(t)}function l(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(1e3*t);var e=i(t),r=e.match(Ot);if(r){var n=parseInt(r[1],10),o=parseInt(r[2],10)-1,a=parseInt(r[3],10);return new Date(n,o,a)}var s=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(s)||e)}function c(e){if(t(e))return e;var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push([n,e[n]]);return r}function p(t,e,r,n,i,s,l,c){return function(p,u,d){var h=p.data,f=o({},t);return f=o(f,d||{}),(p.singleSeriesFormat||"legend"in u)&&e(f,u.legend,p.singleSeriesFormat),u.title&&r(f,u.title),"min"in u?n(f,u.min):a(h)||n(f,0),u.max&&i(f,u.max),"stacked"in u&&s(f,u.stacked),u.colors&&(f.colors=u.colors),u.xtitle&&l(f,u.xtitle),u.ytitle&&c(f,u.ytitle),f=o(f,u.library||{}),f}}function u(t,e){return t[0].getTime()-e[0].getTime()}function d(t,e){return t[0]-e[0]}function h(t,e){return t-e}function f(t,e){for(var r=0;r<t.length;r++)if(!e(t[r]))return!1;return!0}function y(t){return"day"===t||"week"===t||"month"===t||"year"===t}function m(t,e){if(void 0===e&&(e=!1),0===t.length)return null;var r=f(t,function(t){return 0===t.getMilliseconds()&&0===t.getSeconds()});if(!r)return null;var n=f(t,function(t){return 0===t.getMinutes()});if(!n)return"minute";var o=f(t,function(t){return 0===t.getHours()});if(!o)return"hour";if(e)return"day";var a=f(t,function(t){return 1===t.getDate()});if(!a){var i=t[0].getDay(),s=f(t,function(t){return t.getDay()===i});return s?"week":"day"}var l=f(t,function(t){return 0===t.getMonth()});return l?"year":"month"}function v(t){return!isNaN(l(t))&&i(t).length>=6}function g(t){return"number"==typeof t}function b(t,e,r,n){t=t||"",r.prefix&&(e<0&&(e*=-1,t+="-"),t+=r.prefix);var o=r.suffix||"",a=r.precision,s=r.round;if(r.byteScale){var l=e>=0;l||(e*=-1);var c,p=n?r.byteScale:e;p>=0x1000000000000000?(e/=0x1000000000000000,c=6):p>=0x4000000000000?(e/=0x4000000000000,c=5):p>=1099511627776?(e/=1099511627776,c=4):p>=1073741824?(e/=1073741824,c=3):p>=1048576?(e/=1048576,c=2):p>=1024?(e/=1024,c=1):c=0,void 0===a&&void 0===s&&(e>=1023.5&&c<Lt.length-1&&(e=1,c+=1),a=e>=1e3?4:3),o=" "+Lt[c],l||(e*=-1)}if(void 0!==a&&void 0!==s)throw Error("Use either round or precision, not both");if(!n&&(void 0!==a&&(e=e.toPrecision(a),r.zeros||(e=parseFloat(e))),void 0!==s))if(s<0){var u=Math.pow(10,-1*s);e=parseInt((1*e/u).toFixed(0))*u}else e=e.toFixed(s),r.zeros||(e=parseFloat(e));if(r.thousands||r.decimal){e=i(e);var d=e.split(".");e=d[0],r.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,r.thousands)),d.length>1&&(e+=(r.decimal||".")+d[1])}return t+e+o}function x(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}function w(t,e,r){void 0!==e?(t.plugins.legend.display=!!e,e&&!0!==e&&(t.plugins.legend.position=e)):r&&(t.plugins.legend.display=!1)}function C(t,e){t.plugins.title.display=!0,t.plugins.title.text=e}function _(t,e){null!==e&&(t.scales.y.min=s(e))}function k(t,e){t.scales.y.max=s(e)}function S(t,e){null!==e&&(t.scales.x.min=s(e))}function A(t,e){t.scales.x.max=s(e)}function T(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e}function D(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e}function O(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e}function L(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")":t}function z(t){return null!=t}function E(t,e,r){var n=Math.ceil(t.element.offsetWidth/4/e.labels.length);n>25?n=25:n<10&&(n=10),r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(t){return t=i(this.getLabelForValue(t)),t.length>n?t.substring(0,n-2)+"...":t})}function F(t){for(var e=1,r=B(t);r>=1024;)e*=1024,r/=1024;return e}function j(t,e,r){var n={thousands:t.options.thousands,decimal:t.options.decimal},a=o({prefix:t.options.prefix,suffix:t.options.suffix,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros},n);if(t.options.bytes){var s=t.data;"pie"===r&&(s=[{data:s}]),a.byteScale=F(s)}if("pie"!==r){var l=e.scales.y;"bar"===r&&(l=e.scales.x),a.byteScale&&(l.ticks.stepSize||(l.ticks.stepSize=a.byteScale/2),l.ticks.maxTicksLimit||(l.ticks.maxTicksLimit=4)),l.ticks.callback||(l.ticks.callback=function(t){return b("",t,a,!0)}),"scatter"!==r&&"bubble"!==r||e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(t){return b("",t,n,!0)})}if(!e.plugins.tooltip.callbacks.label)if("scatter"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.parsed;return e+"("+b("",r.x,n)+", "+b("",r.y,a)+")"};else if("bubble"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.raw;return e+"("+b("",r.x,n)+", "+b("",r.y,a)+", "+b("",r.v,n)+")"};else if("pie"===r)e.plugins.tooltip.callbacks.label=function(t){return b("",t.parsed,a)};else{var c="bar"===r?"x":"y";e.plugins.tooltip.callbacks.label=function(t){if(null!==t.parsed[c]){var e=t.dataset.label||"";return e&&(e+=": "),b(e,t.parsed[c],a)}}}"line"!==r&&"area"!==r||"number"!==t.xtype||(e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(t){return i(t)}),e.plugins.tooltip.callbacks.title||(e.plugins.tooltip.callbacks.title=function(t){return i(t[0].parsed.x)}))}function B(t){for(var e=0,r=0;r<t.length;r++)for(var n=t[r].data,o=0;o<n.length;o++){var a=Math.abs(n[o][1]);a>e&&(e=a)}return e}function N(t){for(var e=0,r=0;r<t.length;r++)for(var n=t[r].data,o=0;o<n.length;o++){var a=n[o][2];a>e&&(e=a)}return e}function I(t){for(var e=t.data,r={},n=[],o=[],a=[],i=0;i<e.length;i++)for(var s=e[i].data,l=0;l<s.length;l++){var c=s[l],p="datetime"===t.xtype?c[0].getTime():c[0];r[p]||(r[p]=new Array(e.length),n.push(p)),r[p][i]=c[1]}"datetime"!==t.xtype&&"number"!==t.xtype||n.sort(h);for(var u=0;u<e.length;u++)a.push([]);for(var d=0;d<n.length;d++){var f=n[d],y="datetime"===t.xtype?new Date(f):f;o.push(y);for(var m=r[f],v=0;v<e.length;v++){var g=m[v];a[v].push(void 0===g?null:g)}}return{labels:o,values:a}}function M(t){for(var e=t.data,r=[],n=N(e),o=0;o<e.length;o++){for(var a=e[o].data,i=[],s=0;s<a.length;s++){var l=a[s];i.push({x:l[0],y:l[1],r:20*l[2]/n,v:l[2]})}r.push(i)}return{labels:[],values:r}}function R(t){for(var e=t.data,r=[],n=0;n<e.length;n++){var o=e[n].data;o.sort(d);for(var a=[],i=0;i<o.length;i++){var s=o[i];a.push({x:s[0],y:s[1]})}r.push(a)}return{labels:[],values:r}}function H(t,e){return"bubble"===e?M(t):"number"===t.xtype&&"bar"!==e&&"column"!==e?R(t):I(t)}function P(e,r,n){for(var a=H(e,n),i=a.labels,s=a.values,c=e.data,p=[],u=e.options.colors||Ft,d=0;d<c.length;d++){var h=c[d],f=void 0,y=void 0;if(!e.options.colors||!e.singleSeriesFormat||"bar"!==n&&"column"!==n||h.color||!t(e.options.colors)||t(e.options.colors[0]))f=h.color||u[d],y="line"!==n?L(f,.5):f;else{f=u,y=[];for(var v=0;v<u.length;v++)y[v]=L(f[v],.5)}var g={label:h.name||"",data:s[d],fill:"area"===n,borderColor:f,backgroundColor:y,borderWidth:2},b="line"===n||"area"===n||"scatter"===n||"bubble"===n;b&&(g.pointBackgroundColor=f,g.pointHoverBackgroundColor=f,g.pointHitRadius=50),"bubble"===n&&(g.pointBackgroundColor=y,g.pointHoverBackgroundColor=y,g.pointHoverBorderWidth=2),h.stack&&(g.stack=h.stack);var w=x(e,h,"curve");!1===w?g.tension=0:b&&(g.tension=.4);var C=x(e,h,"points");!1===C&&(g.pointRadius=0,g.pointHoverRadius=0),g=o(g,e.options.dataset||{}),g=o(g,h.library||{}),g=o(g,h.dataset||{}),p.push(g)}var _=e.options.xmin,k=e.options.xmax;if("datetime"===e.xtype?(z(_)&&(r.scales.x.min=l(_).getTime()),z(k)&&(r.scales.x.max=l(k).getTime())):"number"===e.xtype&&(z(_)&&(r.scales.x.min=_),z(k)&&(r.scales.x.max=k)),"datetime"===e.xtype){var S=m(i);if(0===i.length&&(z(_)&&i.push(l(_)),z(k)&&i.push(l(k))),i.length>0){for(var A=(z(_)?l(_):i[0]).getTime(),T=(z(k)?l(k):i[0]).getTime(),D=1;D<i.length;D++){var O=i[D].getTime();O<A&&(A=O),O>T&&(T=O)}var E,F=(T-A)/864e5;if(!r.scales.x.time.unit)if("year"===S||F>3650?(r.scales.x.time.unit="year",E=365):"month"===S||F>300?(r.scales.x.time.unit="month",E=30):"week"===S||"day"===S||F>10?(r.scales.x.time.unit="day",E=1):"hour"===S||F>.5?(r.scales.x.time.displayFormats={hour:"MMM d, h a"},r.scales.x.time.unit="hour",E=1/24):"minute"===S&&(r.scales.x.time.displayFormats={minute:"h:mm a"},r.scales.x.time.unit="minute",E=1/24/60),E&&F>0){var j=e.element.offsetWidth;if(j>0){var B=Math.ceil(F/E/(j/100));"week"===S&&1===E&&(B=7*Math.ceil(B/7)),r.scales.x.ticks.stepSize=B}}r.scales.x.time.tooltipFormat||("year"===S?r.scales.x.time.tooltipFormat="yyyy":"month"===S?r.scales.x.time.tooltipFormat="MMM yyyy":"week"===S||"day"===S?r.scales.x.time.tooltipFormat="PP":"hour"===S?r.scales.x.time.tooltipFormat="MMM d, h a":"minute"===S&&(r.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:i,datasets:p}}function W(t,e,r){void 0!==e?(t.legend.enabled=!!e,e&&!0!==e&&("top"===e||"bottom"===e?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):r&&(t.legend.enabled=!1)}function V(t,e){t.title.text=e}function G(t,e){t.yAxis.min=e}function U(t,e){t.yAxis.max=e}function J(t,e){var r=e?!0===e?"normal":e:null;t.plotOptions.series.stacking=r,t.plotOptions.area.stacking=r,t.plotOptions.areaspline.stacking=r}function K(t,e){t.xAxis.title.text=e}function q(t,e){t.yAxis.title.text=e}function $(e,r,n){var o={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};"pie"===n||t(r.yAxis)||r.yAxis.labels.formatter||(r.yAxis.labels.formatter=function(){return b("",this.value,o)}),r.tooltip.pointFormatter||r.tooltip.pointFormat||(r.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+b(this.series.name+": <b>",this.y,o)+"</b><br/>"})}function X(t,e,r){var n;void 0!==e?(n=e?!0===e?"right":e:"none",t.legend.position=n):r&&(t.legend.position="none")}function Y(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}}function Z(t,e){t.vAxis.viewWindow.min=e}function Q(t,e){t.vAxis.viewWindow.max=e}function tt(t,e){t.hAxis.viewWindow.min=e}function et(t,e){t.hAxis.viewWindow.max=e}function rt(t,e){t.isStacked=e||!1}function nt(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1}function ot(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}function at(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,!0),t()}function it(t){if(t){if("Highcharts"===t.product)return Mt;if(t.charts)return Vt;if(e(t))return Bt}throw new Error("Unknown adapter")}function st(t){for(var e=it(t),r=0;r<Gt.length;r++)if(Gt[r].library===t)return;Gt.push(new e(t))}function lt(){"Chart"in window&&st(window.Chart),"Highcharts"in window&&st(window.Highcharts),window.google&&window.google.charts&&st(window.google)}function ct(t,r){var n="render"+t,o=r.options.adapter;lt();for(var a=0;a<Gt.length;a++){var i=Gt[a];if((!o||o===i.name)&&e(i[n]))return r.adapter=i.name,r.__adapterObject=i,i[n](r)}throw Gt.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}function pt(t){for(var e=[],r=0;r<t.length;r++)e.push([s(t[r][0]),s(t[r][1]),s(t[r][2])]);return e}function ut(t,e){if("bubble"===e)return pt(t);var r;r="number"===e?s:"datetime"===e?l:i;for(var n=[],o=0;o<t.length;o++)n.push([r(t[o][0]),s(t[o][1])]);return n}function dt(t,e,r){return vt(t)?!r.xmin&&!r.xmax||r.xmin&&!v(r.xmin)||r.xmax&&!v(r.xmax)?"number":"datetime":ht(t,g)?"number":!e&&ht(t,v)?"datetime":"string"}function ht(t,e){for(var r=0;r<t.length;r++)for(var n=c(t[r].data),o=0;o<n.length;o++)if(!e(n[o][0]))return!1;return!0}function ft(t){for(var e=[],r=0;r<t.length;r++){var n={};for(var o in t[r])Object.prototype.hasOwnProperty.call(t[r],o)&&(n[o]=t[r][o]);e.push(n)}return e}function yt(e,n,o){var a=e.options,i=e.rawData;e.singleSeriesFormat=!t(i)||!r(i[0]),e.singleSeriesFormat&&(i=[{name:a.label,data:i}]),i=ft(i);for(var s=0;s<i.length;s++)i[s].data=c(i[s].data);e.xtype=n||(a.discrete?"string":dt(i,o,a));for(var l=0;l<i.length;l++)i[l].data=ut(i[l].data,e.xtype);return i}function mt(t){for(var e=c(t.rawData),r=0;r<e.length;r++)e[r]=[i(e[r][0]),s(e[r][1])];return e}function vt(t,e){if("PieChart"===e||"GeoChart"===e||"Timeline"===e)return 0===t.length;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return!1;return!0}function gt(t){var e=t.options.download;!0===e?e={}:"string"==typeof e&&(e={filename:e});var r=document.createElement("a");r.download=e.filename||"chart.png",r.style.position="absolute",r.style.top="20px",r.style.right="20px",r.style.zIndex=1e3,r.style.lineHeight="20px",r.target="_blank";var n=document.createElement("img"),o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';n.src="data:image/svg+xml;utf8,"+encodeURIComponent(o),n.alt="Download",n.style.width="20px",n.style.height="20px",n.style.border="none",r.appendChild(n);var a=t.element;a.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=a.addEventListener("mouseover",function(n){var o=n.relatedTarget;o&&(o===this||this.contains(o))||!t.options.download||(r.href=t.toImage(e),a.appendChild(r))}),t.__leaveEvent=a.addEventListener("mouseout",function(t){var e=t.relatedTarget;e&&(e===this||this.contains(e))||r.parentNode&&r.parentNode.removeChild(r)})}function bt(t,e,r){Jt.push([t,e,r]),xt()}function xt(){if(Kt<qt){var t=Jt.shift();t&&(Kt++,Ct(t[0],t[1],t[2]),xt())}}function wt(){Kt--,xt()}function Ct(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){wt(),200===n.status?e(JSON.parse(n.responseText)):r(n.statusText)},n.send()}function _t(t,e){t.textContent=e}function kt(t,e,r){r||(e="Error Loading Chart: "+e),_t(t,e),t.style.color="#ff0000"}function St(t){try{t.__render()}catch(e){throw kt(t.element,e.message),e}}function At(t,e,r){if(r&&t.options.loading&&("string"==typeof e||"function"==typeof e)&&_t(t.element,t.options.loading),"string"==typeof e)bt(e,function(e){t.rawData=e,St(t)},function(e){kt(t.element,e)});else if("function"==typeof e)try{e(function(e){t.rawData=e,St(t)},function(e){kt(t.element,e,!0)})}catch(e){kt(t.element,e,!0)}else t.rawData=e,St(t)}function Tt(t,e){if(vt(e.data,t)){var r=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";_t(e.element,r)}else ct(t,e),e.options.download&&!e.__downloadAttached&&"chartjs"===e.adapter&&gt(e)}function Dt(t){if("string"==typeof t){var e=t;if(t=document.getElementById(t),!t)throw new Error("No element with id "+e)}return t}var Ot=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i,Lt=["bytes","KB","MB","GB","TB","PB","EB"],zt={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},Et={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},Ft=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"],jt=p(o(zt,Et),w,C,_,k,T,D,O),Bt=function(t){this.name="chartjs",this.library=t};Bt.prototype.renderLineChart=function(t,e){e||(e="line");var r={},n=jt(t,o(r,t.options));j(t,n,e);var a=P(t,n,e);"number"===t.xtype?(n.scales.x.type=n.scales.x.type||"linear",n.scales.x.position=n.scales.x.position||"bottom"):n.scales.x.type="string"===t.xtype?"category":"time",this.drawChart(t,"line",a,n)},Bt.prototype.renderPieChart=function(t){var e=o({},zt);t.options.donut&&(e.cutout="50%"),"legend"in t.options&&w(e,t.options.legend),t.options.title&&C(e,t.options.title),e=o(e,t.options.library||{}),j(t,e,"pie");for(var r=[],n=[],a=0;a<t.data.length;a++){var i=t.data[a];r.push(i[0]),n.push(i[1])}var s={data:n,backgroundColor:t.options.colors||Ft};s=o(s,t.options.dataset||{});var l={labels:r,datasets:[s]};this.drawChart(t,"pie",l,e)},Bt.prototype.renderColumnChart=function(t,e){var r;if("bar"===e){var n=o(zt,Et);n.indexAxis="y",n.scales.x.grid.drawOnChartArea=!0,n.scales.y.grid.drawOnChartArea=!1,delete n.scales.y.ticks.maxTicksLimit,r=p(n,w,C,S,A,T,D,O)(t,t.options)}else r=jt(t,t.options);j(t,r,e);var a=P(t,r,"column");"bar"!==e&&E(t,a,r),"mode"in r.interaction||(r.interaction.mode="index"),this.drawChart(t,"bar",a,r)},Bt.prototype.renderAreaChart=function(t){this.renderLineChart(t,"area")},Bt.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},Bt.prototype.renderScatterChart=function(t,e){e=e||"scatter";var r=jt(t,t.options);j(t,r,e),"showLine"in r||(r.showLine=!1);var n=P(t,r,e);r.scales.x.type=r.scales.x.type||"linear",r.scales.x.position=r.scales.x.position||"bottom","mode"in r.interaction||(r.interaction.mode="nearest"),this.drawChart(t,e,n,r)},Bt.prototype.renderBubbleChart=function(t){this.renderScatterChart(t,"bubble")},Bt.prototype.destroy=function(t){t.chart&&t.chart.destroy()},Bt.prototype.drawChart=function(t,e,r,n){if(this.destroy(t),!t.destroyed){var o={type:e,data:r,options:n};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(o)+");"),t.element.innerHTML="<canvas></canvas>";var a=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(a,o)}};var Nt={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}},It=p(Nt,W,V,G,U,J,K,q),Mt=function(t){this.name="highcharts",this.library=t};Mt.prototype.renderLineChart=function(t,e){e=e||"spline";var r={};"areaspline"===e&&(r={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),!1===t.options.curve&&("areaspline"===e?e="area":"spline"===e&&(e="line"));var n=It(t,t.options,r);"number"===t.xtype?n.xAxis.type=n.xAxis.type||"linear":n.xAxis.type="string"===t.xtype?"category":"datetime",n.chart.type||(n.chart.type=e),$(t,n,e);for(var o=t.data,a=0;a<o.length;a++){o[a].name=o[a].name||"Value";var i=o[a].data;if("datetime"===t.xtype)for(var s=0;s<i.length;s++)i[s][0]=i[s][0].getTime();else"number"===t.xtype&&i.sort(d);o[a].marker={symbol:"circle"},!1===t.options.points&&(o[a].marker.enabled=!1)}this.drawChart(t,o,n)},Mt.prototype.renderScatterChart=function(t){var e=It(t,t.options,{});e.chart.type="scatter",this.drawChart(t,t.data,e)},Mt.prototype.renderPieChart=function(t){var e=o(Nt,{});t.options.colors&&(e.colors=t.options.colors),t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}}),"legend"in t.options&&W(e,t.options.legend),t.options.title&&V(e,t.options.title);var r=o(e,t.options.library||{});$(t,r,"pie");var n=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,n,r)},Mt.prototype.renderColumnChart=function(t,e){e=e||"column";var r=t.data,n=It(t,t.options),o=[],a=[];n.chart.type=e,$(t,n,e);for(var i=0;i<r.length;i++)for(var s=r[i],l=0;l<s.data.length;l++){var c=s.data[l];o[c[0]]||(o[c[0]]=new Array(r.length),a.push(c[0])),o[c[0]][i]=c[1]}"number"===t.xtype&&a.sort(h),n.xAxis.categories=a;for(var p=[],u=0;u<r.length;u++){for(var d=[],f=0;f<a.length;f++)d.push(o[a[f]][u]||0);var y={name:r[u].name||"Value",data:d};r[u].stack&&(y.stack=r[u].stack),p.push(y)}this.drawChart(t,p,n)},Mt.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},Mt.prototype.renderAreaChart=function(t){this.renderLineChart(t,"areaspline")},Mt.prototype.destroy=function(t){t.chart&&t.chart.destroy()},Mt.prototype.drawChart=function(t,e,r){this.destroy(t),t.destroyed||(r.chart.renderTo=t.element.id,r.series=e,t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(r)+");"),t.chart=new this.library.Chart(r))};var Rt={},Ht=[],Pt={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},Wt=p(Pt,X,Y,Z,Q,rt,nt,ot),Vt=function(t){this.name="google",this.library=t};Vt.prototype.renderLineChart=function(t){var e=this;this.waitForLoaded(t,function(){var r={};!1===t.options.curve&&(r.curveType="none"),!1===t.options.points&&(r.pointSize=0);var n=Wt(t,t.options,r),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",o,n)})},Vt.prototype.renderPieChart=function(t){var e=this;this.waitForLoaded(t,function(){var r={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(r.colors=t.options.colors),t.options.donut&&(r.pieHole=.5),"legend"in t.options&&X(r,t.options.legend),t.options.title&&Y(r,t.options.title);var n=o(o(Pt,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number","Value"),a.addRows(t.data),e.drawChart(t,"PieChart",a,n)})},Vt.prototype.renderColumnChart=function(t){var e=this;this.waitForLoaded(t,function(){var r=Wt(t,t.options),n=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",n,r)})},Vt.prototype.renderBarChart=function(t){var e=this;this.waitForLoaded(t,function(){var r={hAxis:{gridlines:{color:"#ccc"}}},n=p(Pt,X,Y,tt,et,rt,nt,ot)(t,t.options,r),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",o,n)})},Vt.prototype.renderAreaChart=function(t){var e=this;this.waitForLoaded(t,function(){var r={isStacked:!0,pointSize:0,areaOpacity:.5},n=Wt(t,t.options,r),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",o,n)})},Vt.prototype.renderGeoChart=function(t){var e=this;this.waitForLoaded(t,"geochart",function(){var r={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},n=o(o(Pt,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number",t.options.label||"Value"),a.addRows(t.data),e.drawChart(t,"GeoChart",a,n)})},Vt.prototype.renderScatterChart=function(t){var e=this;this.waitForLoaded(t,function(){for(var r={},n=Wt(t,t.options,r),o=t.data,a=[],i=0;i<o.length;i++){o[i].name=o[i].name||"Value";for(var s=o[i].data,l=0;l<s.length;l++){var c=new Array(o.length+1);c[0]=s[l][0],c[i+1]=s[l][1],a.push(c)}}var p=new e.library.visualization.DataTable;p.addColumn("number","");for(var u=0;u<o.length;u++)p.addColumn("number",o[u].name);p.addRows(a),e.drawChart(t,"ScatterChart",p,n)})},Vt.prototype.renderTimeline=function(t){var e=this;this.waitForLoaded(t,"timeline",function(){var r={legend:"none"};t.options.colors&&(r.colors=t.options.colors);var n=o(o(Pt,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn({type:"string",id:"Name"}),a.addColumn({type:"date",id:"Start"}),a.addColumn({type:"date",id:"End"}),a.addRows(t.data),t.element.style.lineHeight="normal",e.drawChart(t,"Timeline",a,n)})},Vt.prototype.destroy=function(t){t.chart&&t.chart.clearChart()},Vt.prototype.drawChart=function(t,e,r,n){this.destroy(t),t.destroyed||(t.options.code&&window.console.log("var data = new google.visualization.DataTable("+r.toJSON()+");\nvar chart = new google.visualization."+e+"(element);\nchart.draw(data, "+JSON.stringify(n)+");"),t.chart=new this.library.visualization[e](t.element),at(function(){t.chart.draw(r,n)}))},Vt.prototype.waitForLoaded=function(t,e,r){var n=this;if(r||(r=e,e="corechart"),Ht.push({pack:e,callback:r}),Rt[e])this.runCallbacks();else{Rt[e]=!0;var o={packages:[e],callback:function(){n.runCallbacks()}},a=t.__config();a.language&&(o.language=a.language),"geochart"===e&&a.mapsApiKey&&(o.mapsApiKey=a.mapsApiKey),this.library.charts.load("current",o)}},Vt.prototype.runCallbacks=function(){for(var t=0;t<Ht.length;t++){var e=Ht[t],r=this.library.visualization&&("corechart"===e.pack&&this.library.visualization.LineChart||"timeline"===e.pack&&this.library.visualization.Timeline||"geochart"===e.pack&&this.library.visualization.GeoChart);r&&(e.callback(),Ht.splice(t,1),t--)}},Vt.prototype.createDataTable=function(t,e){for(var r=[],n=[],o=0;o<t.length;o++){var a=t[o];t[o].name=t[o].name||"Value";for(var s=0;s<a.data.length;s++){var l=a.data[s],c="datetime"===e?l[0].getTime():l[0];r[c]||(r[c]=new Array(t.length),n.push(c)),r[c][o]=l[1]}}for(var p=[],h=[],f=0;f<n.length;f++){var v=n[f],g=void 0;"datetime"===e?(g=new Date(v),h.push(g)):g=v,p.push([g].concat(r[v]))}var b=!0;if("datetime"===e){p.sort(u);var x=m(h,!0);b=y(x)}else if("number"===e){p.sort(d);for(var w=0;w<p.length;w++)p[w][0]=i(p[w][0]);e="string"}var C=new this.library.visualization.DataTable;e="datetime"===e&&b?"date":e,C.addColumn(e,"");for(var _=0;_<t.length;_++)C.addColumn("number",t[_].name);return C.addRows(p),C};var Gt=[],Ut={charts:{},configure:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(Ut.config[e]=t[e])},setDefaultOptions:function(t){Ut.options=t},eachChart:function(t){for(var e in Ut.charts)Object.prototype.hasOwnProperty.call(Ut.charts,e)&&t(Ut.charts[e])},destroyAll:function(){for(var t in Ut.charts)Object.prototype.hasOwnProperty.call(Ut.charts,t)&&(Ut.charts[t].destroy(),delete Ut.charts[t])},config:{},options:{},adapters:Gt,addAdapter:st,use:function(t){return st(t),Ut}},Jt=[],Kt=0,qt=4,$t=function(t,e,r){this.element=Dt(t),this.options=o(Ut.options,r||{}),this.dataSource=e,this.element.id&&(Ut.charts[this.element.id]=this),At(this,e,!0),this.options.refresh&&this.startRefresh()};$t.prototype.getElement=function(){return this.element},$t.prototype.getDataSource=function(){return this.dataSource},$t.prototype.getData=function(){return this.data},$t.prototype.getOptions=function(){return this.options},$t.prototype.getChartObject=function(){return this.chart},$t.prototype.getAdapter=function(){return this.adapter},$t.prototype.updateData=function(t,e){this.dataSource=t,e&&this.__updateOptions(e),At(this,t,!0)},$t.prototype.setOptions=function(t){this.__updateOptions(t),this.redraw()},$t.prototype.redraw=function(){At(this,this.rawData)},$t.prototype.refreshData=function(){if("string"==typeof this.dataSource){var t=-1===this.dataSource.indexOf("?")?"?":"&",e=this.dataSource+t+"_="+(new Date).getTime();At(this,e)}else"function"==typeof this.dataSource&&At(this,this.dataSource)},$t.prototype.startRefresh=function(){var t=this,e=this.options.refresh;if(e&&"string"!=typeof this.dataSource&&"function"!=typeof this.dataSource)throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId){if(!e)throw new Error("No refresh interval");this.intervalId=setInterval(function(){t.refreshData()},1e3*e)}},$t.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},$t.prototype.toImage=function(t){if("chartjs"===this.adapter){if(t&&t.background&&"transparent"!==t.background){var e=this.chart.canvas,r=this.chart.ctx,n=document.createElement("canvas"),o=n.getContext("2d");return n.width=r.canvas.width,n.height=r.canvas.height,o.fillStyle=t.background,o.fillRect(0,0,n.width,n.height),o.drawImage(e,0,0),n.toDataURL("image/png")}return this.chart.toBase64Image()}throw new Error("Feature only available for Chart.js")},$t.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)},$t.prototype.__updateOptions=function(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=o(Ut.options,t),e&&(this.stopRefresh(),this.startRefresh())},$t.prototype.__render=function(){this.data=this.__processData(),Tt(this.__chartName(),this)},$t.prototype.__config=function(){return Ut.config};var Xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this)},e.prototype.__chartName=function(){return"LineChart"},e}($t),Yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return mt(this)},e.prototype.__chartName=function(){return"PieChart"},e}($t),Zt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}($t),Qt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}($t),te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this)},e.prototype.__chartName=function(){return"AreaChart"},e}($t),ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return mt(this)},e.prototype.__chartName=function(){return"GeoChart"},e}($t),re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}($t),ne=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return yt(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}($t),oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){for(var t=this.rawData,e=0;e<t.length;e++)t[e][1]=l(t[e][1]),t[e][2]=l(t[e][2]);return t},
e.prototype.__chartName=function(){return"Timeline"},e}($t);return Ut.LineChart=Xt,Ut.PieChart=Yt,Ut.ColumnChart=Zt,Ut.BarChart=Qt,Ut.AreaChart=te,Ut.GeoChart=ee,Ut.ScatterChart=re,Ut.BubbleChart=ne,Ut.Timeline=oe,"undefined"==typeof window||window.Chartkick||(window.Chartkick=Ut,document.addEventListener("turbolinks:before-render",function(){!1!==Ut.config.autoDestroy&&Ut.destroyAll()}),document.addEventListener("turbo:before-render",function(){!1!==Ut.config.autoDestroy&&Ut.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0)),Ut.default=Ut,Ut});